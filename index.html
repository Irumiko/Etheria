<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etheria - Roleplay Visual Novel</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- Noise overlay -->
    <div class="noise-overlay"></div>
    
    <!-- Loading -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Cargando datos...</div>
    </div>

    <!-- Autosave Indicator -->
    <div id="autosaveIndicator" class="autosave-indicator">
        <span class="autosave-icon">‚òÅÔ∏è</span>
        <span class="autosave-text">Guardando...</span>
    </div>

    <!-- Weather Container -->
    <div id="weatherContainer" class="weather-container"></div>

    <!-- Continuation Overlay -->
    <div id="continuationOverlay" class="vn-continuation-overlay" onclick="if(event.target === this) VN.closeContinuation()">
        <div class="vn-continuation-box">
            <button class="vn-continuation-close" onclick="VN.closeContinuation()">‚úï</button>
            <h3 class="vn-continuation-title">üé≠ Continuaci√≥n de la escena</h3>
            <div id="continuationText" class="vn-continuation-text"></div>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settingsPanel" class="settings-panel">
        <h3 class="settings-title">‚öôÔ∏è Ajustes de Lectura</h3>
        
        <div class="setting-item">
            <label class="setting-label">Velocidad del texto</label>
            <input type="range" id="textSpeedSlider" class="setting-slider" min="10" max="100" value="25" oninput="Settings.updateTextSpeed(this.value)">
            <div class="speed-labels">
                <span>R√°pido</span>
                <span id="speedValue">Normal</span>
                <span>Lento</span>
            </div>
        </div>
        
        <div class="setting-item">
            <label class="setting-label">Tama√±o de fuente</label>
            <input type="range" id="fontSizeSlider" class="setting-slider" min="14" max="24" value="19" oninput="Settings.updateFontSize(this.value)">
        </div>
        
        <div class="setting-item">
            <label class="setting-label">Filtro de atm√≥sfera</label>
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="Settings.setAtmosphere('none')">Normal</button>
                <button class="filter-btn" onclick="Settings.setAtmosphere('sepia')">Sepia</button>
                <button class="filter-btn" onclick="Settings.setAtmosphere('bw')">B/N</button>
                <button class="filter-btn" onclick="Settings.setAtmosphere('cinematic')">Cine</button>
            </div>
        </div>
        
        <button onclick="Settings.close()" class="btn-primary" style="width: 100%; margin-top: 1rem;">Cerrar</button>
    </div>

    <!-- Main Views Container -->
    <main id="app">
        <!-- User Select -->
        <section id="userSelectScreen" class="user-select-screen"></section>

        <!-- Main Menu -->
        <div id="mainMenu" class="main-menu hidden"></div>

        <!-- Game Sections -->
        <div id="topicsSection" class="game-section"></div>
        <div id="gallerySection" class="game-section"></div>
        <div id="optionsSection" class="game-section"></div>
        <div id="vnSection" class="game-section vn-section"></div>
    </main>

    <!-- Modals -->
    <div id="topicModal" class="modal-overlay" onclick="if(event.target === this) Modals.close('topicModal')"></div>
    <div id="characterModal" class="modal-overlay" onclick="if(event.target === this) Modals.close('characterModal')"></div>
    <div id="sheetModal" class="modal-overlay" onclick="if(event.target === this) Modals.close('sheetModal')"></div>
    <div id="historyModal" class="modal-overlay" onclick="if(event.target === this) Modals.close('historyModal')"></div>
    <div id="branchEditorModal" class="modal-overlay" onclick="if(event.target === this) Modals.close('branchEditorModal')"></div>

    <!-- JavaScript Modules -->
    <script src="js/utils/text.js"></script>
    <script src="js/utils/dom.js"></script>
    <script src="js/data.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/features/weather.js"></script>
    <script src="js/features/emotes.js"></script>
    <script src="js/features/affinity.js"></script>
    <script src="js/features/options.js"></script>
    <script src="js/ui/components.js"></script>
    <script src="js/ui/gallery.js"></script>
    <script src="js/ui/topics.js"></script>
    <script src="js/ui/character.js"></script>
    <script src="js/ui/vn.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
